<h2> Checkout</h2>
<hr>

<div *ngIf="items.length >0 ; else noItems"> 
    <p> Your current cart includes these items:</p>
    <div class="alert alert-info" *ngFor="let product of items">
            <h4> {{product.name}}</h4>    
            <hr>
            <h6> {{product.price | currency }}</h6>
        </div>
        <h4 class="text-right">Total price: {{items | sum | currency }} </h4>

        <form [formGroup]="checkoutForm" aciton>
            <div class="form-group"> 
                <label for="name" > Name </label>
                <input type="text" name="name" id="name" class="form-control" formControlName="name"> 
            </div>
                <p class="error-message" *ngIf="name!=null && name.errors?.['required']" > Name is required </p>
                <p class="error-message" *ngIf="name!=null && name.errors?.['incorrectName']"> Name is not correct </p>
            <div class="form-group"> 
                <label for="address" >Address</label>
                <input type="text" name="address" id="address" class="form-control" formControlName="address"> 
            </div>
              <p class="error-message"  *ngIf="address!=null && address.errors?.['required']"> Address is required </p>
                <p class="error-message" *ngIf="address!=null && address.errors?.['pattern']" > Address is not correct </p>

            <div class="form-group"> 
                <label for="email"  > Email </label>
                <input type="text" name="email" id="email" class="form-control" formControlName="email"> 
            </div>
            <p class="error-message"  *ngIf="email!=null && email.errors?.['required']"> Email is required </p>
            <p class="error-message"  *ngIf="email!=null && email.errors?.['email']" > Email is not correct </p>
           
            <button type="submit" class="btn btn-primary btn-block"  (click)="submitForm(checkoutForm.value)"  [disabled]="!checkoutForm.valid">Purchase </button>
            <!-- Da objasnimo sta se desava u 31. i 32. liniji, posto smo naveli 3 atributa , name adrress i email u cart.component.ts
                sada proveravamo njihovu vrednost, ako je name razlicito od null, i ako je errors.required postavljeno na true onda ce da se prikaze poruka
                medjutim mi smo za incorrectName pravili rucno, nismo koristili neki ugradjeni,tako da moramo da proverimo da li je on postalvjeln na true, ako jeste onda prikazujemo poruku
             -->
        </form>
</div>

<ng-template #noItems>
    <p> This cart is empty! </p>
</ng-template>

<!-- ovde hocemo da prikazemo sve iteme koji su dodati u korpu i to na sledeci nacin 
 sa *ngIf proveravamo da li postoji nesto sto je dodato u korpi, ako jeste onda prikazujemo celu ovu strukturu
ako je prazna, to znaci da ce da se priakze ng template koji ima identifikator noItems -->